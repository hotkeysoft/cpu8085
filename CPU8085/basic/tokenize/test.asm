.module 	tokenizetest
.title 		Tests tokenize Module

.include	'tokenize.def'

STACK	==	0xFFFF			;SYSTEM STACK

.area	BOOT	(ABS)

.org 	0x0000
	
RST0:
	DI
	LXI	SP,STACK		;INITALIZE STACK
	JMP 	START


;*********************************************************
;* MAIN PROGRAM
;*********************************************************
.area 	_CODE

START:

	MVI	A,8			;SET INTERRUPT MASK
	SIM
	EI				;ENABLE INTERRUPTS

	JMP	TEST_FINDTOKENID


;TEST_FINDTOKENID:
	LXI	H,TESTSTR1
	SHLD	TOK_CURRPOS
	CALL	TOK_FINDTOKENID

	LXI	H,TESTSTR2
	SHLD	TOK_CURRPOS
	CALL	TOK_FINDTOKENID

	LXI	H,TESTSTR3
	SHLD	TOK_CURRPOS
	CALL	TOK_FINDTOKENID

	LXI	H,TESTSTR4
	SHLD	TOK_CURRPOS
	CALL	TOK_FINDTOKENID

	LXI	H,TESTSTR5
	SHLD	TOK_CURRPOS
	CALL	TOK_FINDTOKENID

	LXI	H,TESTSTR6
	SHLD	TOK_CURRPOS
	CALL	TOK_FINDTOKENID
TEST_FINDTOKENID:
	LXI	H,TESTSTR7
	SHLD	TOK_CURRPOS
	CALL	TOK_FINDTOKENID

	LXI	H,TESTSTR8
	SHLD	TOK_CURRPOS
	CALL	TOK_FINDTOKENID

LOOP:
	JMP	LOOP


TESTSTR1:	.asciz	'^'
TESTSTR2:	.asciz	'+'
TESTSTR3:	.asciz	'<>'

TESTSTR4:	.asciz	'ABS'
TESTSTR5:	.asciz	'RIGHT$'
TESTSTR6:	.asciz	'?'

TESTSTR7:	.asciz	'!'
TESTSTR8:	.asciz	'IN'



